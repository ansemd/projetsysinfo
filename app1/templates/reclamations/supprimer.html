<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Supprimer R√©clamation {{ reclamation.numero_reclamation }}</title>
</head>
<body>
    <h1>üóëÔ∏è Supprimer la R√©clamation {{ reclamation.numero_reclamation }}</h1>
    
    <a href="{% url 'detail_reclamation' reclamation.id %}"><button>‚Üê Retour aux d√©tails</button></a>
    
    <hr>
    
    <h2>‚ö†Ô∏è Confirmation de Suppression</h2>
    
    <!-- Informations de la r√©clamation √† supprimer -->
    <table border="1" cellpadding="10" style="width: 100%;">
        <tr>
            <th style="width: 30%; background: #f0f0f0;">N¬∞ R√©clamation</th>
            <td><strong style="font-size: 1.3em; color: #dc3545;">{{ reclamation.numero_reclamation }}</strong></td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Client</th>
            <td>{{ reclamation.client.prenom }} {{ reclamation.client.nom }}</td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">T√©l√©phone</th>
            <td>{{ reclamation.client.telephone }}</td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Email</th>
            <td>{{ reclamation.client.email|default:"Non renseign√©" }}</td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Type</th>
            <td>{{ reclamation.get_type_reclamation_display }}</td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Nature</th>
            <td>{{ reclamation.get_nature_display }}</td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Priorit√©</th>
            <td>
                {% if reclamation.priorite == 'URGENTE' %}
                    <span style="color: red; font-weight: bold;">üî¥ {{ reclamation.get_priorite_display }}</span>
                {% elif reclamation.priorite == 'ELEVEE' %}
                    <span style="color: orange; font-weight: bold;">üü† {{ reclamation.get_priorite_display }}</span>
                {% elif reclamation.priorite == 'NORMALE' %}
                    <span style="color: blue;">üîµ {{ reclamation.get_priorite_display }}</span>
                {% else %}
                    <span style="color: green;">üü¢ {{ reclamation.get_priorite_display }}</span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Statut</th>
            <td><strong>{{ reclamation.get_statut_display }}</strong></td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Date cr√©ation</th>
            <td>{{ reclamation.date_creation|date:"d/m/Y √† H:i" }}</td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Objet</th>
            <td><strong>{{ reclamation.objet }}</strong></td>
        </tr>
        <tr>
            <th style="background: #f0f0f0;">Description</th>
            <td style="white-space: pre-wrap; background: #f9f9f9;">{{ reclamation.description|truncatewords:50 }}</td>
        </tr>
        {% if reclamation.agent_responsable %}
        <tr>
            <th style="background: #f0f0f0;">Agent responsable</th>
            <td>{{ reclamation.agent_responsable }}</td>
        </tr>
        {% endif %}
        {% if reclamation.compensation_accordee %}
        <tr style="background: #fff3cd;">
            <th>üí∞ Compensation accord√©e</th>
            <td><strong style="font-size: 1.1em;">{{ reclamation.montant_compensation|floatformat:2 }} DA</strong></td>
        </tr>
        {% endif %}
        {% if reclamation.expeditions.exists %}
        <tr>
            <th style="background: #f0f0f0;">Exp√©ditions li√©es</th>
            <td><strong>{{ reclamation.expeditions.count }} exp√©dition(s)</strong></td>
        </tr>
        {% endif %}
        {% if reclamation.facture %}
        <tr>
            <th style="background: #f0f0f0;">Facture li√©e</th>
            <td><strong>{{ reclamation.facture.numero_facture }}</strong></td>
        </tr>
        {% endif %}
    </table>
    
    <hr>
    
    <!-- DANGER ZONE - Avertissement majeur -->
    <div style="background: #f8d7da; padding: 20px; border: 3px solid #721c24; margin: 20px 0;">
        <h2 style="color: #721c24; margin-top: 0;">‚õî ZONE DANGEREUSE - ACTION IRR√âVERSIBLE</h2>
        
        <p style="font-size: 1.1em; color: #721c24; font-weight: bold;">
            ‚ö†Ô∏è ATTENTION : Vous √™tes sur le point de <strong>SUPPRIMER D√âFINITIVEMENT</strong> cette r√©clamation !
        </p>
        
        <h3 style="color: #721c24;">üî• Cons√©quences de la suppression :</h3>
        <ul style="color: #721c24; font-size: 1.05em; line-height: 1.8;">
            <li><strong>TOUTES les donn√©es</strong> de cette r√©clamation seront <strong>D√âFINITIVEMENT SUPPRIM√âES</strong></li>
            <li>L'<strong>historique complet</strong> de toutes les actions sera <strong>PERDU</strong></li>
            <li>Les <strong>pi√®ces jointes</strong> (documents, photos) seront <strong>SUPPRIM√âES</strong></li>
            <li>Les <strong>r√©ponses</strong> et <strong>solutions</strong> propos√©es seront <strong>PERDUES</strong></li>
            <li>Les liens avec les <strong>exp√©ditions</strong> et la <strong>facture</strong> seront <strong>ROMPUS</strong></li>
            <li><strong>AUCUNE R√âCUP√âRATION POSSIBLE</strong> - Cette action <strong>NE PEUT PAS √äTRE ANNUL√âE</strong></li>
        </ul>
        
        <hr style="border-color: #721c24;">
        
        <h3 style="color: #856404; background: #fff3cd; padding: 10px; border-left: 4px solid #856404;">
            üí° RECOMMANDATION IMPORTANTE
        </h3>
        <p style="font-size: 1.05em;">
            <strong>‚ö†Ô∏è Privil√©giez plut√¥t l'une de ces alternatives :</strong>
        </p>
        <ul style="font-size: 1.05em; line-height: 1.8;">
            <li>
                <strong>‚ùå ANNULER</strong> la r√©clamation (pour r√©clamations infond√©es, doublons, erreurs)
                <br>‚Üí <em>Conserve l'historique et permet une tra√ßabilit√©</em>
            </li>
            <li>
                <strong>üîí CL√îTURER</strong> la r√©clamation (apr√®s r√©solution)
                <br>‚Üí <em>Ferme d√©finitivement la r√©clamation tout en gardant les donn√©es</em>
            </li>
        </ul>
        
        <p style="background: white; padding: 15px; border-left: 4px solid #dc3545; margin-top: 15px;">
            <strong style="color: #dc3545;">‚ö†Ô∏è La suppression doit √™tre utilis√©e UNIQUEMENT dans des cas exceptionnels</strong>
            <br>
            (erreur technique majeure, test, doublon syst√®me, etc.)
        </p>
    </div>
    
    <hr>
    
    <!-- Formulaire de confirmation -->
    <form method="POST">
        {% csrf_token %}
        
        <h3 style="color: #dc3545;">üö® Confirmation finale :</h3>
        
        <p style="font-size: 1.15em; color: #dc3545; font-weight: bold; background: #fff3cd; padding: 15px; border: 2px solid #dc3545;">
            ‚ö†Ô∏è √ätes-vous <strong>ABSOLUMENT CERTAIN</strong> de vouloir supprimer d√©finitivement cette r√©clamation ?
        </p>
        
        <p style="font-size: 1.05em;">
            Cette action va <strong>D√âTRUIRE TOUTES LES DONN√âES</strong> et <strong>NE PEUT PAS √äTRE ANNUL√âE</strong>.
        </p>
        
        <br>
        
        <button 
            type="submit" 
            style="background: #dc3545; color: white; padding: 15px 35px; font-size: 1.2em; font-weight: bold; cursor: pointer; border: 3px solid #721c24;"
            onclick="return confirm('‚ö†Ô∏è DERNI√àRE CONFIRMATION ‚ö†Ô∏è\n\nVoulez-vous VRAIMENT supprimer d√©finitivement cette r√©clamation ?\n\nToutes les donn√©es seront PERDUES et cette action est IRR√âVERSIBLE !');"
        >
            üóëÔ∏è OUI, SUPPRIMER D√âFINITIVEMENT
        </button>
        
        <a href="{% url 'detail_reclamation' reclamation.id %}">
            <button 
                type="button" 
                style="background: #28a745; color: white; padding: 15px 35px; font-size: 1.2em; font-weight: bold; border: 2px solid #1e7e34;"
            >
                ‚úÖ NON, RETOUR AUX D√âTAILS (Recommand√©)
            </button>
        </a>
    </form>
    
    <hr>
    
    <!-- Conseil final -->
    <div style="background: #d1ecf1; padding: 15px; border-left: 5px solid #0c5460; margin-top: 20px;">
        <p style="margin: 0; font-size: 1.05em;">
            <strong>üí° Rappel :</strong> Si vous souhaitez simplement fermer cette r√©clamation sans perdre les donn√©es,
            <br>
            utilisez plut√¥t les boutons <strong>"‚ùå Annuler"</strong> ou <strong>"üîí Cl√¥turer"</strong> depuis la page de d√©tails.
        </p>
    </div>
</body>
</html>