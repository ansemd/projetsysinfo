# Generated by Django 4.2.27 on 2026-01-09 13:22

import django.contrib.auth.models
import django.contrib.auth.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import phonenumber_field.modelfields


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='Chauffeur',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=50)),
                ('prenom', models.CharField(max_length=50)),
                ('date_naissance', models.DateField(default='2000-01-01')),
                ('telephone', phonenumber_field.modelfields.PhoneNumberField(max_length=128, region='DZ')),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('adresse', models.TextField(blank=True, null=True)),
                ('ville', models.CharField(blank=True, max_length=100, null=True)),
                ('wilaya', models.CharField(blank=True, max_length=100, null=True)),
                ('numero_permis', models.CharField(max_length=50, unique=True)),
                ('date_obtention_permis', models.DateField()),
                ('date_expiration_permis', models.DateField()),
                ('date_embauche', models.DateField()),
                ('salaire', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('statut_disponibilite', models.CharField(choices=[('DISPONIBLE', 'Disponible'), ('EN_TOURNEE', 'En tournée'), ('CONGE', 'En congé'), ('MALADIE', 'Maladie'), ('AUTRE', 'Autre raison')], default='DISPONIBLE', max_length=20)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('remarques', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Client',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=20)),
                ('prenom', models.CharField(max_length=20)),
                ('date_naissance', models.DateField(default='2000-01-01')),
                ('telephone', phonenumber_field.modelfields.PhoneNumberField(max_length=128, region='DZ', unique=True)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('adresse', models.TextField(blank=True, null=True)),
                ('ville', models.CharField(blank=True, max_length=100, null=True)),
                ('wilaya', models.CharField(blank=True, max_length=100, null=True)),
                ('solde', models.DecimalField(decimal_places=2, default=0.0, max_digits=12)),
                ('date_inscription', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('remarques', models.TextField(blank=True, null=True)),
                ('compensation_autorisee', models.BooleanField(default=True, help_text='Autoriser la compensation automatique du crédit sur les factures')),
            ],
        ),
        migrations.CreateModel(
            name='Destination',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ville', models.CharField(blank=True, max_length=100, null=True)),
                ('wilaya', models.CharField(max_length=100)),
                ('pays', models.CharField(default='Algérie', max_length=100)),
                ('zone_geographique', models.CharField(choices=[('LOCALE', 'Locale (même wilaya)'), ('NATIONALE', 'Nationale'), ('INTERNATIONALE', 'Internationale')], max_length=20)),
                ('zone_logistique', models.CharField(choices=[('CENTRE', 'Centre (Alger, Blida...)'), ('EST', 'Est (Constantine, Annaba, Sétif...)'), ('OUEST', 'Ouest (Oran, Tlemcen, Sidi Bel Abbès...)'), ('SUD', 'Sud (Tamanrasset, Adrar, Bechar...)')], default='CENTRE', max_length=10)),
                ('distance_estimee', models.IntegerField(help_text='Distance en km depuis le dépôt principal')),
                ('tarif_base', models.DecimalField(decimal_places=2, default=0, help_text='Tarif de base en DA', max_digits=10)),
                ('delai_livraison_estime', models.IntegerField(default=1, help_text='Délai estimé en jours')),
                ('code_postal', models.CharField(blank=True, max_length=10, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('remarques', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Expedition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom_destinataire', models.CharField(max_length=100)),
                ('telephone_destinataire', phonenumber_field.modelfields.PhoneNumberField(max_length=128, region='DZ')),
                ('email_destinataire', models.EmailField(max_length=254)),
                ('adresse_destinataire', models.TextField()),
                ('poids', models.DecimalField(decimal_places=2, help_text='Poids en kg', max_digits=8)),
                ('volume', models.DecimalField(decimal_places=2, help_text='Volume en m³', max_digits=8)),
                ('description', models.TextField(blank=True, null=True)),
                ('montant_total', models.DecimalField(decimal_places=2, default=0, editable=False, max_digits=10)),
                ('date_livraison_prevue', models.DateField(blank=True, editable=False, null=True)),
                ('statut', models.CharField(choices=[('EN_ATTENTE', 'En attente'), ('EN_TRANSIT', 'En transit'), ('LIVRE', 'Livré'), ('ECHEC', 'Échec')], default='EN_ATTENTE', max_length=20)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_livraison_reelle', models.DateField(blank=True, null=True)),
                ('remarques', models.TextField(blank=True, null=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='app1.client')),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='app1.destination')),
            ],
        ),
        migrations.CreateModel(
            name='Facture',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_facture', models.CharField(blank=True, max_length=50, unique=True)),
                ('montant_ht', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('montant_tva', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('montant_ttc', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('taux_tva', models.DecimalField(decimal_places=2, default=19.0, max_digits=5)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_echeance', models.DateField()),
                ('statut', models.CharField(choices=[('IMPAYEE', 'Impayée'), ('PARTIELLEMENT_PAYEE', 'Partiellement payée'), ('PAYEE', 'Payée'), ('EN_RETARD', 'En retard'), ('ANNULEE', 'Annulée')], default='IMPAYEE', max_length=20)),
                ('remarques', models.TextField(blank=True, null=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='factures', to='app1.client')),
                ('expeditions', models.ManyToManyField(related_name='factures', to='app1.expedition')),
            ],
            options={
                'ordering': ['-date_creation'],
            },
        ),
        migrations.CreateModel(
            name='TypeService',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type_service', models.CharField(choices=[('STANDARD', 'Standard'), ('EXPRESS', 'Express'), ('INTERNATIONAL', 'International')], max_length=20, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Vehicule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_immatriculation', models.CharField(max_length=50, unique=True)),
                ('marque', models.CharField(max_length=100)),
                ('modele', models.CharField(max_length=100)),
                ('annee', models.IntegerField()),
                ('type_vehicule', models.CharField(choices=[('CAMIONNETTE', 'Camionnette'), ('CAMION', 'Camion'), ('FOURGON', 'Fourgon'), ('MOTO', 'Moto')], max_length=20)),
                ('capacite_poids', models.DecimalField(decimal_places=2, help_text='Capacité en kg', max_digits=8)),
                ('capacite_volume', models.DecimalField(decimal_places=2, help_text='Volume en m³', max_digits=8)),
                ('consommation_moyenne', models.DecimalField(decimal_places=2, help_text='Consommation en L/100km', max_digits=5)),
                ('etat', models.CharField(choices=[('EXCELLENT', 'Excellent'), ('BON', 'Bon'), ('MOYEN', 'Moyen'), ('MAUVAIS', 'Mauvais')], default='BON', max_length=20)),
                ('statut', models.CharField(choices=[('DISPONIBLE', 'Disponible'), ('EN_TOURNEE', 'En tournée'), ('EN_MAINTENANCE', 'En maintenance'), ('HORS_SERVICE', 'Hors service')], default='DISPONIBLE', max_length=20)),
                ('date_derniere_revision', models.DateField(blank=True, null=True)),
                ('date_prochaine_revision', models.DateField(blank=True, null=True)),
                ('kilometrage', models.PositiveIntegerField(default=0, help_text='Compteur kilométrique total')),
                ('date_acquisition', models.DateField()),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('remarques', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='TrackingExpedition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('statut_etape', models.CharField(choices=[('COLIS_CREE', 'Colis créé'), ('EN_ATTENTE', 'En attente'), ('EN_TRANSIT', 'En transit'), ('LIVRE', 'Livré'), ('ECHEC', 'Échec')], max_length=20)),
                ('date_heure', models.DateTimeField(auto_now_add=True)),
                ('commentaire', models.TextField(blank=True, null=True)),
                ('expedition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='suivis', to='app1.expedition')),
            ],
            options={
                'ordering': ['-date_heure'],
            },
        ),
        migrations.CreateModel(
            name='Tournee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_depart', models.DateTimeField()),
                ('date_retour_prevue', models.DateTimeField(blank=True, null=True)),
                ('date_retour_reelle', models.DateTimeField(blank=True, null=True)),
                ('zone_cible', models.CharField(choices=[('CENTRE', 'Centre'), ('EST', 'Est'), ('OUEST', 'Ouest'), ('SUD', 'Sud')], max_length=10)),
                ('kilometrage_depart', models.PositiveIntegerField(blank=True, editable=False, null=True)),
                ('kilometrage_arrivee', models.PositiveIntegerField(blank=True, null=True)),
                ('kilometrage_parcouru', models.PositiveIntegerField(blank=True, editable=False, null=True)),
                ('consommation_carburant', models.DecimalField(blank=True, decimal_places=2, editable=False, max_digits=6, null=True)),
                ('statut', models.CharField(choices=[('PREVUE', 'Prévue'), ('EN_COURS', 'En cours'), ('TERMINEE', 'Terminée')], default='PREVUE', max_length=20)),
                ('est_privee', models.BooleanField(default=False, help_text='Tournée privée EXPRESS')),
                ('remarques', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('chauffeur', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='app1.chauffeur')),
                ('vehicule', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='app1.vehicule')),
            ],
        ),
        migrations.CreateModel(
            name='Reclamation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_reclamation', models.CharField(blank=True, editable=False, max_length=50, unique=True)),
                ('type_reclamation', models.CharField(choices=[('EXPEDITION', 'Liée à une expédition'), ('FACTURE', 'Liée à une facture'), ('SERVICE', 'Liée à un service'), ('AUTRE', 'Autre')], default='EXPEDITION', help_text='Type de réclamation', max_length=20)),
                ('service_concerne', models.CharField(blank=True, choices=[('LIVRAISON', 'Service de livraison'), ('FACTURATION', 'Service facturation'), ('CLIENT', 'Service client'), ('TECHNIQUE', 'Service technique'), ('COMMERCIAL', 'Service commercial'), ('AUTRE', 'Autre')], help_text='Service concerné (si type = SERVICE)', max_length=50, null=True)),
                ('nature', models.CharField(choices=[('RETARD_LIVRAISON', 'Retard de livraison'), ('COLIS_ENDOMMAGE', 'Colis endommagé'), ('COLIS_PERDU', 'Colis perdu'), ('ERREUR_FACTURATION', 'Erreur de facturation'), ('MAUVAIS_SERVICE', 'Mauvais service'), ('COMPORTEMENT_CHAUFFEUR', 'Comportement du chauffeur'), ('COLIS_INCOMPLET', 'Colis incomplet'), ('REMBOURSEMENT', 'Demande de remboursement'), ('AUTRE', 'Autre')], max_length=30)),
                ('priorite', models.CharField(choices=[('BASSE', 'Basse'), ('NORMALE', 'Normale'), ('HAUTE', 'Haute'), ('URGENTE', 'Urgente')], default='NORMALE', max_length=20)),
                ('objet', models.CharField(help_text='Objet de la réclamation', max_length=200)),
                ('description', models.TextField(help_text='Description détaillée de la réclamation')),
                ('statut', models.CharField(choices=[('OUVERTE', 'Ouverte'), ('EN_COURS', 'En cours de traitement'), ('EN_ATTENTE_CLIENT', 'En attente de réponse du client'), ('RESOLUE', 'Résolue'), ('CLOSE', 'Clôturée'), ('ANNULEE', 'Annulée')], default='OUVERTE', max_length=30)),
                ('agent_responsable', models.CharField(blank=True, help_text='Agent assigné', max_length=100, null=True)),
                ('date_assignation', models.DateTimeField(blank=True, null=True)),
                ('reponse_agent', models.TextField(blank=True, help_text="Réponse de l'agent", null=True)),
                ('solution_proposee', models.TextField(blank=True, null=True)),
                ('date_resolution', models.DateTimeField(blank=True, null=True)),
                ('delai_traitement_jours', models.IntegerField(blank=True, editable=False, help_text='Calculé automatiquement', null=True)),
                ('commentaire_client', models.TextField(blank=True, null=True)),
                ('piece_jointe1', models.FileField(blank=True, null=True, upload_to='reclamations/documents/')),
                ('piece_jointe2', models.FileField(blank=True, null=True, upload_to='reclamations/documents/')),
                ('compensation_accordee', models.BooleanField(default=False)),
                ('montant_compensation', models.DecimalField(decimal_places=2, default=0, help_text='Montant en DA', max_digits=10)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('remarques', models.TextField(blank=True, null=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reclamations', to='app1.client')),
                ('expeditions', models.ManyToManyField(blank=True, help_text='Expéditions concernées', related_name='reclamations', to='app1.expedition')),
                ('facture', models.ForeignKey(blank=True, help_text='Facture concernée (si applicable)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reclamations', to='app1.facture')),
            ],
            options={
                'verbose_name': 'Réclamation',
                'verbose_name_plural': 'Réclamations',
                'ordering': ['-date_creation'],
            },
        ),
        migrations.CreateModel(
            name='Paiement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('montant_paye', models.DecimalField(decimal_places=2, max_digits=10)),
                ('date_paiement', models.DateTimeField(auto_now_add=True)),
                ('mode_paiement', models.CharField(choices=[('ESPECES', 'Espèces'), ('CARTE', 'Carte bancaire'), ('VIREMENT', 'Virement'), ('CHEQUE', 'Chèque')], max_length=20)),
                ('reference_transaction', models.CharField(blank=True, max_length=100, null=True)),
                ('remarques', models.TextField(blank=True, null=True)),
                ('statut', models.CharField(default='VALIDE', max_length=20)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='paiements', to='app1.client')),
                ('facture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='paiements', to='app1.facture')),
            ],
            options={
                'ordering': ['-date_paiement'],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type_notification', models.CharField(choices=[('MAINTENANCE_AVANT', 'Maintenance prévue demain'), ('MAINTENANCE_APRES', 'Véhicule en maintenance - Retour?'), ('SOLDE_NEGATIF', 'Client en crédit'), ('REMBOURSEMENT_REQUIS', 'Remboursement incident requis'), ('TOURNEE_TERMINEE', 'Tournée terminée'), ('INFO', 'Information'), ('ALERTE', 'Alerte')], max_length=30)),
                ('titre', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('statut', models.CharField(choices=[('NON_LUE', 'Non lue'), ('LUE', 'Lue'), ('TRAITEE', 'Traitée')], default='NON_LUE', max_length=20)),
                ('action_effectuee', models.CharField(blank=True, help_text="Action effectuée par l'agent (ex: COMPENSATION_AUTORISEE, REMBOURSE, REVISION_CONFIRMEE)", max_length=50, null=True)),
                ('commentaire_traitement', models.TextField(blank=True, help_text="Commentaire de l'agent lors du traitement", null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_traitement', models.DateTimeField(blank=True, null=True)),
                ('chauffeur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app1.chauffeur')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app1.client')),
                ('tournee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app1.tournee')),
                ('vehicule', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app1.vehicule')),
            ],
            options={
                'ordering': ['-date_creation'],
            },
        ),
        migrations.CreateModel(
            name='Incident',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_incident', models.CharField(blank=True, editable=False, max_length=50, unique=True)),
                ('type_incident', models.CharField(choices=[('RETARD', 'Retard de livraison'), ('PERTE', 'Perte de colis'), ('ENDOMMAGEMENT', 'Endommagement'), ('PROBLEME_TECHNIQUE', 'Problème technique véhicule'), ('ACCIDENT', 'Accident'), ('REFUS_DESTINATAIRE', 'Refus du destinataire'), ('ADRESSE_INCORRECTE', 'Adresse incorrecte'), ('DESTINATAIRE_ABSENT', 'Destinataire absent'), ('AUTRE', 'Autre')], max_length=30)),
                ('severite', models.CharField(choices=[('FAIBLE', 'Faible'), ('MOYENNE', 'Moyenne'), ('ELEVEE', 'Élevée'), ('CRITIQUE', 'Critique')], default='MOYENNE', max_length=20)),
                ('titre', models.CharField(help_text="Résumé court de l'incident", max_length=200)),
                ('description', models.TextField(help_text="Description détaillée de l'incident")),
                ('lieu_incident', models.CharField(blank=True, max_length=200, null=True)),
                ('date_heure_incident', models.DateTimeField(help_text="Date et heure de survenue de l'incident")),
                ('statut', models.CharField(choices=[('SIGNALE', 'Signalé'), ('EN_COURS', 'En cours de traitement'), ('RESOLU', 'Résolu'), ('CLOS', 'Clôturé')], default='SIGNALE', max_length=20)),
                ('signale_par', models.CharField(help_text='Nom de la personne ayant signalé', max_length=100)),
                ('agent_responsable', models.CharField(blank=True, help_text='Agent en charge du traitement', max_length=100, null=True)),
                ('actions_entreprises', models.TextField(blank=True, help_text="Actions effectuées pour résoudre l'incident", null=True)),
                ('date_resolution', models.DateTimeField(blank=True, null=True)),
                ('cout_estime', models.DecimalField(decimal_places=2, default=0, help_text='Coût estimé en DA', max_digits=10)),
                ('document1', models.FileField(blank=True, null=True, upload_to='incidents/documents/')),
                ('document2', models.FileField(blank=True, null=True, upload_to='incidents/documents/')),
                ('photo1', models.ImageField(blank=True, null=True, upload_to='incidents/photos/')),
                ('photo2', models.ImageField(blank=True, null=True, upload_to='incidents/photos/')),
                ('alerte_direction', models.BooleanField(default=False, help_text='Alerter la direction')),
                ('alerte_client', models.BooleanField(default=False, help_text='Alerter le client')),
                ('remboursement_effectue', models.BooleanField(default=False, help_text='Remboursement effectué au client')),
                ('montant_rembourse', models.DecimalField(decimal_places=2, default=0, help_text='Montant remboursé en DA', max_digits=10)),
                ('taux_remboursement', models.DecimalField(decimal_places=2, default=100.0, help_text='Pourcentage de remboursement (0-100%)', max_digits=5)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('remarques', models.TextField(blank=True, null=True)),
                ('expedition', models.ForeignKey(blank=True, help_text='Expédition concernée (si applicable)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='incidents', to='app1.expedition')),
                ('tournee', models.ForeignKey(blank=True, help_text='Tournée concernée (si applicable)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='incidents', to='app1.tournee')),
            ],
            options={
                'verbose_name': 'Incident',
                'verbose_name_plural': 'Incidents',
                'ordering': ['-date_heure_incident'],
            },
        ),
        migrations.CreateModel(
            name='HistoriqueReclamation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_action', models.DateTimeField(auto_now_add=True)),
                ('action', models.CharField(help_text="Type d'action effectuée", max_length=100)),
                ('auteur', models.CharField(help_text="Qui a effectué l'action", max_length=100)),
                ('details', models.TextField(blank=True, null=True)),
                ('ancien_statut', models.CharField(blank=True, max_length=30, null=True)),
                ('nouveau_statut', models.CharField(blank=True, max_length=30, null=True)),
                ('reclamation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='historique', to='app1.reclamation')),
            ],
            options={
                'verbose_name': 'Historique de réclamation',
                'verbose_name_plural': 'Historiques de réclamations',
                'ordering': ['-date_action'],
            },
        ),
        migrations.CreateModel(
            name='HistoriqueIncident',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_action', models.DateTimeField(auto_now_add=True)),
                ('action', models.CharField(help_text="Type d'action effectuée", max_length=100)),
                ('auteur', models.CharField(help_text="Qui a effectué l'action", max_length=100)),
                ('details', models.TextField(blank=True, null=True)),
                ('ancien_statut', models.CharField(blank=True, max_length=20, null=True)),
                ('nouveau_statut', models.CharField(blank=True, max_length=20, null=True)),
                ('incident', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='historique', to='app1.incident')),
            ],
            options={
                'verbose_name': "Historique d'incident",
                'verbose_name_plural': "Historiques d'incidents",
                'ordering': ['-date_action'],
            },
        ),
        migrations.AddField(
            model_name='expedition',
            name='tournee',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='expeditions', to='app1.tournee'),
        ),
        migrations.AddField(
            model_name='expedition',
            name='type_service',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='app1.typeservice'),
        ),
        migrations.CreateModel(
            name='AgentUtilisateur',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='email address')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('telephone', models.CharField(max_length=15)),
                ('is_responsable', models.BooleanField(default=False, verbose_name='Agent responsable')),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
            ],
            options={
                'verbose_name': 'Agent Utilisateur',
                'verbose_name_plural': 'Agents Utilisateurs',
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='Tarification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tarif_poids', models.DecimalField(decimal_places=2, default=10.0, help_text='Tarif par kg en DA', max_digits=10)),
                ('tarif_volume', models.DecimalField(decimal_places=2, default=20.0, help_text='Tarif par m³ en DA', max_digits=10)),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='app1.destination')),
                ('type_service', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='app1.typeservice')),
            ],
            options={
                'unique_together': {('destination', 'type_service')},
            },
        ),
    ]
